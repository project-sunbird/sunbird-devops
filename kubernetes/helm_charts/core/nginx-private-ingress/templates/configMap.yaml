apiVersion: v1
data:
  default.conf: |
    server {
      listen 80;
      listen [::]:80;

      location /learner/ {
        rewrite ^/learner/(.*) /$1 break;
        proxy_pass http://learner-service:9000;
      }
      location /api/ {
        rewrite ^/api/(.*) /$1 break;
        proxy_pass http://kong:8000;
      }
      location /admin-api/ {
        rewrite ^/admin-api/(.*) /$1 break;
        proxy_pass http://kong:8001;
      }
      location /content/ {
        rewrite ^/content/(.*) /$1 break;
        proxy_pass http://content-service:9000;
      }
      location /print/ {
        rewrite ^/print/(.*) /$1 break;
        proxy_pass http://print-service:5000;
      }
    }
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: private-ingress.conf
  namespace: {{ .Values.namespace }}
