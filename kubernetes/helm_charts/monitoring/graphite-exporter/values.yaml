namespace: monitoring

image:
  repository: prom/graphite-exporter
  tag: latest
  pullPolicy: IfNotPresent

replicaCount: 1

resources:
  requests:
    cpu: 100m
    memory: 100Mi
  limits:
    cpu: 1
    memory: 1024Mi
network:
  port: 9109
  targetport: 9109
strategy:
  type: RollingUpdate
  maxsurge: 30%
  maxunavailable: 30%

graphiteconfig: |
  mappings:
  - match: druid.metric.druid.broker.*.*.timeseries.query.time
    name: druid_timeseries_query_time
    labels:
      broker: $1
      job: $2
  - match: druid.metric.druid.broker.*.*.groupBy.query.time
    name: druid_groupby_query_time
    labels:
      broker: $1
      job: $2
  - match: druid.metric.druid.overlord.*.*.ingest.kafka.lag
    name: druid_ingest_kafka_lag
    labels:
      overlord: $1
      job: $2
