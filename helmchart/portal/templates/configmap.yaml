---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-config
  namespace: {{ .Release.Namespace }}
data:
  {{/* This section has variables whose value is read from another object */}}
  
  {{/* This section has variables which in turn contain one or more mandatory variables */}}
  cloud_service_provider: {{ if eq (include "common.csp.validation" .Values.cloud_service_provider) "true" }}
  {{- .Values.cloud_service_provider }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a valid value for \"cloud_service_provider\". Accepted values are \"%s\"" .Chart.Name (include "common.valid.csps" .) | fail }}
  {{- end }}
  
  AZURE_STORAGE_ACCOUNT: {{ if .Values.cloud_public_storage_accountname }}
  {{- .Values.cloud_public_storage_accountname }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_public_storage_accountname\"" .Chart.Name | fail }}
  {{- end }}

  AZURE_STORAGE_KEY: {{ if .Values.cloud_public_storage_secret }}
  {{- .Values.cloud_public_storage_secret }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_public_storage_secret\"" .Chart.Name | fail }}
  {{- end }}

  cloud_private_storage_accountname: {{ if .Values.cloud_private_storage_accountname }}
  {{- .Values.cloud_private_storage_accountname }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_private_storage_accountname\"" .Chart.Name | fail }}
  {{- end }}
  
  {{/*  uncomment for GCP
  cloud_private_storage_project: {{ if .Values.cloud_private_storage_project }}
  {{- .Values.cloud_private_storage_project }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_private_storage_project\"" .Chart.Name | fail }}
  {{- end }}
  
  cloud_private_storage_region: {{ if .Values.cloud_private_storage_region }}
  {{- .Values.cloud_private_storage_region }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_private_storage_region\"" .Chart.Name | fail }}
  {{- end }}

  sunbird_gcloud_bucket_name: {{ .Values.sunbird_gcloud_bucket_name }}
  sunbird_gcloud_client_email: {{ .Values.sunbird_gcloud_client_email }}
  sunbird_gcloud_labels: {{ .Values.sunbird_gcloud_labels }}
  sunbird_gcloud_private_key: {{ .Values.sunbird_gcloud_private_key }}
  sunbird_gcloud_projectId: {{ .Values.sunbird_gcloud_projectId }}
  sunbird_gcloud_reports: {{ .Values.sunbird_gcloud_reports }}
  */}}

  {{/* uncomment AWS
  # sunbird_aws_access_key: {{ .Values.sunbird_aws_access_key }}
  # sunbird_aws_bucket_name: {{ .Values.sunbird_aws_bucket_name }}
  # sunbird_aws_labels: {{ .Values.sunbird_aws_labels }}
  # sunbird_aws_region: {{ .Values.sunbird_aws_region }}
  # sunbird_aws_reports: {{ .Values.sunbird_aws_reports }}
  # sunbird_aws_secret_key: {{ .Values.sunbird_aws_secret_key }}
  */}}
  cloud_private_storage_secret: {{ if .Values.cloud_private_storage_secret }}
  {{- .Values.cloud_private_storage_secret }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_private_storage_secret\"" .Chart.Name | fail }}
  {{- end }}

  cloud_storage_desktopCrash_bucketname: {{ if .Values.cloud_storage_desktopCrash_bucketname }}
  {{- .Values.cloud_storage_desktopCrash_bucketname }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_storage_desktopCrash_bucketname\"" .Chart.Name | fail }}
  {{- end }}
  
  cloud_storage_privatereports_bucketname: {{ if .Values.cloud_storage_privatereports_bucketname }}
  {{- .Values.cloud_storage_privatereports_bucketname }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_storage_privatereports_bucketname\"" .Chart.Name | fail }}
  {{- end }}

  cloud_storage_resourceBundle_bucketname: {{ if .Values.cloud_storage_resourceBundle_bucketname }}
  {{- .Values.cloud_storage_resourceBundle_bucketname }}
  {{- else -}}
  {{- printf "ERROR | %s | Please provide a value for \"cloud_storage_resourceBundle_bucketname\"" .Chart.Name | fail }}
  {{- end }}

  config_refresh_interval: {{ .Values.config_refresh_interval | quote }}
  config_service_enabled: {{ .Values.config_service_enabled | quote}}
  crypto_encryption_key: {{ .Values.crypto_encryption_key }}
  crypto_encryption_key_external: {{ .Values.crypto_encryption_key_external | quote }}
  desktop_app_storage_url: {{ .Values.desktop_app_storage_url }}
  discussions_middleware: {{ .Values.discussions_middleware }}
  ekstep_env: {{ .Values.ekstep_env }}
  google_captcha_private_key: {{ .Values.google_captcha_private_key | quote }}
  ml_survey_url: {{ .Values.ml_survey_url }}
  portal_redirect_error_callback_domain: https://{{ .Values.domain }}
  portal_redis_connection_string: {{ .Values.portal_redis_connection_string }}
  reportsListVersion: {{ .Values.reportsListVersion }}
  sunbird_android_app_url: {{ .Values.sunbird_android_app_url | quote }}
  sunbird_android_keycloak_client_id: {{ .Values.sunbird_android_keycloak_client_id }}
  sunbird_anonymous_default_token: {{ .Values.sunbird_anonymous_default_token }}
  sunbird_anonymous_device_register_api: {{ .Values.sunbird_anonymous_device_register_api }}
  sunbird_anonymous_register_token: {{ .Values.sunbird_anonymous_register_token }}
  sunbird_anonymous_session_ttl: {{ .Values.sunbird_anonymous_session_ttl | quote }}
  sunbird_api_auth_token: {{ .Values.sunbird_api_auth_token }}
  sunbird_api_request_timeout: {{ .Values.sunbird_api_request_timeout | quote }}
  sunbird_autocreate_trampoline_user: {{ .Values.sunbird_autocreate_trampoline_user | quote }}
  sunbird_azure_account_key: {{ .Values.sunbird_azure_account_key }}
  sunbird_azure_account_name: {{ .Values.sunbird_azure_account_name }}
  sunbird_azure_report_container_name: {{ .Values.sunbird_azure_report_container_name }}
  sunbird_azure_storage_account_name: {{ .Values.sunbird_azure_storage_account_name }}
  sunbird_base_proto: {{ .Values.sunbird_base_proto }}
  sunbird_bot_configured: {{ .Values.sunbird_bot_configured | quote }}
  sunbird_bot_service_URL: {{ .Values.sunbird_bot_service_URL }}
  sunbird_build_number: {{ .Values.sunbird_build_number | quote }}
  sunbird_cassandra_consistency_level: {{ .Values.sunbird_cassandra_consistency_level }}
  sunbird_cassandra_replication_strategy: {{ .Values.sunbird_cassandra_replication_strategy | quote }}
  sunbird_cassandra_urls: {{ .Values.sunbird_cassandra_urls}}
  sunbird_cloud_storage_provider: {{ .Values.cloud_service_provider }}
  sunbird_cloud_storage_urls: {{ .Values.sunbird_cloud_storage_urls }}
  sunbird_collection_children_limit: {{ .Values.sunbird_collection_children_limit | quote }}
  sunbird_collectionEditorURL: {{ .Values.sunbird_collectionEditorURL }}
  sunbird_config_service_url: {{ .Values.sunbird_config_service_url | quote }}
  sunbird_content_player_url: {{ .Values.sunbird_content_player_url }}
  sunbird_content_proxy_url: {{ .Values.sunbird_content_proxy_url }}
  sunbird_contentEditorURL: {{ .Values.sunbird_contentEditorURL }}
  sunbird_data_product_service: {{ .Values.sunbird_data_product_service }}
  sunbird_dataservice_url: https://{{ .Values.domain }}/api/
  sunbird_default_channel: {{ .Values.sunbird_default_channel }}
  sunbird_default_device_token: {{ .Values.sunbird_default_device_token | quote  }}
  sunbird_default_file_size: {{ .Values.sunbird_default_file_size | quote }}
  sunbird_desktop_keycloak_client_id: {{ .Values.sunbird_desktop_keycloak_client_id }}
  sunbird_device_api: {{ .Values.sunbird_device_api }}
  sunbird_device_register_api: https://{{ .Values.domain }}/v3/device/register/
  sunbird_echo_api_url: {{ .Values.sunbird_echo_api_url }}
  sunbird_enable_api_whitelist: {{ .Values.sunbird_enable_api_whitelist | quote  }}
  sunbird_enable_permission_check: {{ .Values.sunbird_enable_permission_check | quote }}
  sunbird_enable_signup: {{ .Values.sunbird_enable_signup | quote }}
  sunbird_enable_sso: {{ .Values.sunbird_enable_sso | quote }}
  sunbird_environment: {{ .Values.sunbird_environment }}
  sunbird_ext_plugin_url: {{ .Values.sunbird_ext_plugin_url }}
  sunbird_external_content_whitelisted_domains: {{ .Values.sunbird_external_content_whitelisted_domains | quote }}
  sunbird_genericEditorURL: {{ .Values.sunbird_genericEditorURL }}
  sunbird_google_android_keycloak_client_id: {{ .Values.sunbird_google_android_keycloak_client_id }}
  sunbird_google_android_keycloak_secret: {{ .Values.sunbird_google_android_keycloak_secret }}
  sunbird_google_captcha_site_key: {{ .Values.sunbird_google_captcha_site_key | quote }}
  sunbird_google_desktop_keycloak_client_id: {{ .Values.sunbird_google_desktop_keycloak_client_id }}
  sunbird_google_desktop_keycloak_secret: {{ .Values.sunbird_google_desktop_keycloak_secret }}
  sunbird_google_keycloak_client_id: {{ .Values.sunbird_google_keycloak_client_id }}
  sunbird_google_keycloak_secret: {{ .Values.sunbird_google_keycloak_secret }}
  sunbird_google_oauth_clientId: {{ .Values.sunbird_google_oauth_clientId }}
  sunbird_google_oauth_clientSecret: {{ .Values.sunbird_google_oauth_clientSecret }}
  sunbird_google_oauth_ios_clientId: {{ .Values.sunbird_google_oauth_ios_clientId }}
  sunbird_google_oauth_ios_clientSecret: {{ .Values.sunbird_google_oauth_ios_clientSecret }}
  sunbird_health_check_enable: {{ .Values.sunbird_health_check_enable | quote }}
  sunbird_help_link_visibility: {{ .Values.sunbird_help_link_visibility | quote}}
  sunbird_instance: {{ .Values.sunbird_instance }}
  sunbird_keycloak_public_key: {{ .Values.sunbird_keycloak_public_key }}
  sunbird_kong_device_register: {{ .Values.sunbird_kong_device_register | quote }}
  sunbird_kong_device_register_anonymous: {{ .Values.sunbird_kong_device_register_anonymous | quote}}
  sunbird_kong_refresh_token_api: {{ .Values.sunbird_kong_refresh_token_api }}
  sunbird_learner_player_url: {{ .Values.sunbird_learner_player_url }}
  sunbird_logged_default_token: {{ .Values.sunbird_logged_default_token }}
  sunbird_loggedin_device_register_api: {{ .Values.sunbird_loggedin_device_register_api }}
  sunbird_loggedin_register_token: {{ .Values.sunbird_loggedin_register_token }}
  sunbird_p1_reCaptcha_enabled: {{ .Values.sunbird_p1_reCaptcha_enabled | quote }}
  sunbird_p2_reCaptcha_enabled: {{ .Values.sunbird_p2_reCaptcha_enabled | quote}}
  sunbird_p3_reCaptcha_enabled: {{ .Values.sunbird_p3_reCaptcha_enabled | quote }}
  sunbird_phraseApp_token: {{ .Values.sunbird_phraseApp_token | quote }}
  sunbird_port: {{ .Values.sunbird_port | quote }}
  sunbird_portal_auth_server_client: {{ .Values.sunbird_portal_auth_server_client }}
  sunbird_portal_auth_server_url: https://{{ .Values.domain }}/auth
  sunbird_portal_base_url: https://{{ .Values.domain }}
  sunbird_portal_cdn_blob_url: {{ .Values.sunbird_portal_cdn_blob_url }}
  sunbird_portal_cdn_url: {{ .Values.sunbird_portal_cdn_url | quote }}
  sunbird_portal_log_level: {{ .Values.sunbird_portal_log_level }}
  sunbird_portal_merge_auth_server_url: {{ .Values.sunbird_portal_merge_auth_server_url }}
  sunbird_portal_offline_app_download_url: {{ .Values.sunbird_portal_offline_app_download_url }}
  sunbird_portal_offline_app_release_date: {{ .Values.sunbird_portal_offline_app_release_date }}
  sunbird_portal_offline_app_version: {{ .Values.sunbird_portal_offline_app_version }}
  sunbird_portal_offline_supported_languages: {{ .Values.sunbird_portal_offline_supported_languages }}
  sunbird_portal_offline_tenant: {{ .Values.sunbird_portal_offline_tenant }}
  sunbird_portal_player_cdn_enabled: {{ .Values.sunbird_portal_player_cdn_enabled | quote }}
  sunbird_portal_preview_cdn_url: {{ .Values.sunbird_portal_preview_cdn_url | quote }}
  sunbird_portal_realm: {{ .Values.sunbird_portal_realm }}
  sunbird_portal_session_secret: {{ .Values.sunbird_portal_session_secret }}
  sunbird_portal_slugForProminentFilter: {{ .Values.sunbird_portal_slugForProminentFilter | quote }}
  sunbird_portal_title_name: {{ .Values.sunbird_portal_title_name }}
  sunbird_portal_uci_blob_url: {{ .Values.sunbird_portal_uci_blob_url }}
  sunbird_portal_uci_bot_phone_number: {{ .Values.sunbird_portal_uci_bot_phone_number | quote  }}
  sunbird_portal_updateLoginTimeEnabled: {{ .Values.sunbird_portal_updateLoginTimeEnabled | quote }}
  sunbird_portal_user_upload_ref_link: https://{{ .Values.domain }}/help/administrator/register-user/index.html
  sunbird_portal_video_max_size: {{ .Values.sunbird_portal_video_max_size | quote }}
  sunbird_processing_kafka_host: {{ .Values.sunbird_processing_kafka_host }}
  sunbird_questionset_children_limit: {{ .Values.sunbird_questionset_children_limit | quote}}
  sunbird_redis_password: {{ .Values.sunbird_redis_password }}
  sunbird_redis_port: {{ .Values.sunbird_redis_port | quote }}
  sunbird_redis_type: {{ .Values.sunbird_redis_type }}
  sunbird_redis_urls: {{ .Values.sunbird_redis_urls }}
  sunbird_report_service_url: {{ .Values.sunbird_report_service_url }}
  sunbird_response_cache_ttl: {{ .Values.sunbird_response_cache_ttl | quote }}
  sunbird_session_store_type: {{ .Values.sunbird_session_store_type }}
  sunbird_session_ttl: {{ .Values.sunbird_session_ttl | quote }}
  sunbird_sso_kafka_topic: {{ .Values.sunbird_sso_kafka_topic }}
  sunbird_super_admin_slug: {{ .Values.sunbird_super_admin_slug }}
  sunbird_telemetry_packet_size: {{ .Values.sunbird_telemetry_packet_size | quote }}
  sunbird_telemetry_service_local_url: {{ .Values.sunbird_telemetry_service_local_url }}
  sunbird_tenant_cdn_url: {{ .Values.sunbird_tenant_cdn_url | quote }}
  sunbird_trampoline_android_keycloak_client_id: {{ .Values.sunbird_trampoline_android_keycloak_client_id }}
  sunbird_trampoline_android_keycloak_secret: {{ .Values.sunbird_trampoline_android_keycloak_secret }}
  sunbird_trampoline_client_id: {{ .Values.sunbird_trampoline_client_id }}
  sunbird_trampoline_desktop_keycloak_client_id: {{ .Values.sunbird_trampoline_desktop_keycloak_client_id }}
  sunbird_trampoline_desktop_keycloak_secret: {{ .Values.sunbird_trampoline_desktop_keycloak_secret }}
  sunbird_trampoline_secret: {{ .Values.sunbird_trampoline_secret }}
  vdnURL: {{ .Values.vdnURL | quote }}


