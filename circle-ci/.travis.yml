dist: trusty
addons:
 apt:
  packages:
  - python3-pip 

language: generic
python:
- "3.6"

install:
- virtualenv env;
- source env/bin/activate;
- pip install ansible;
- pip install ansible-lint

before_script:
- ./travis-ci-scripts/install_cli.sh

script:
- ./test.sh
- ./travis-ci-scripts/launch_vm.sh
- ./travis-ci-scripts/update_config.sh
- ./travis-ci-scripts/copy_script.sh
- ./travis-ci-scripts/remove_vm.sh

after_script:
- ./test.sh

notification:
 email:
  recipients:
   - msknext@gmail.com
   - keshavprasadms@gmail.com
  on_success: always
  on_failure: always
