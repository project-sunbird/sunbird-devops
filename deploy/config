#----------------------------------------------------------------------#
# Sunbird installation is working in 2 phases
#
# 1. Installing and configuring services and DBs (./sunbird_install.sh)
# 2. Installing the core services (./sunbird_install.sh -s core)
#
# Fields mentioned below are basic prerequisites for working ofsunbird
#----------------------------------------------------------------------#

#----------------------------------------------------------------------#
# Phase 1 : Installing and configuring docker and dbs
#----------------------------------------------------------------------#

#Basic
env:                                # Name of the environment you are deploying. Typically, it is one of development, test, staging, production, etc.
implementation_name:                # Name of your sunbird implementation. Let's say for the sake of this document, it is ntp. 
ssh_ansible_user:                   # Ssh user for accessing all servers, who must be a sudo user
sudo_passwd:                        # If user have sudo password, else please skip it
ansible_private_key_path:           # Path to the private key file to allow ansible to deploy
proxy_prometheus: false             # Please set this variable to true if you want to use monitoring 

#Application
application_host:                   # Private ip of the application server
app_address_space:                  # Application server address space (e.g. 10.3.0.0/24)

#Proxy
dns_name:                           # Public DNS url of the app the server / ip address of your server or load balancer
proto:                              # http/https; if you're usig ip use http
cert_path:                          # Path to .cert file for nginx
key_path:                           # Path to .key file for nginx

#Database
database_host:                      # Db server private ip 
database_password:                  # Common password for all the databases
 
#Keycloak 
keycloak_admin_password:            # Keycloak admin console password. Default user is admin, you can change it in keycloak ui
sso_password:                       # Password for keycloak sso_username (by default username is user-manager, you can change it in keycloak ui)
trampoline_secret:                  # Trampoline secret, atleaset give 8 chars 

# Es configs
backup_storage_name: 
backup_storage_key: 
es_etc_cluster_name: 

# Badger
badger_admin_password:                  # Admin (default admin user is admin, you can create new user using ./manage.py createsuperuser in badger container) password.
badger_admin_email:                     # Admin email address for badger 

#----------------------------------------------------------------------#
# Phase 2: Configuring core services
# ./sunbird_install.sh -s core
#----------------------------------------------------------------------#

# Badger
vault_badging_authorization_key:    # Authorization genrated from the badger service. (Please look for ~/badger_token.txt)

#Ekstep 
ekstep_api_base_url:                # Qa: https://qa.ekstep.in/api & prod: https://api.ekstep.in
ekstep_proxy_base_url:              # Qa: https://qa.ekstep.in  & prod: https://community.ekstep.in   

sunbird_auth_token:                 # JWT token generated by ansible. (You can get it from ~/jwt.txt).
ekstep_api_key:                     # Jwt token generated by the key,secret produced from the ekstep portal.
                                    # Please go through this url for more about jwt:
                                    # https://community.ekstep.in/developer-knowledgebase/45-getting-started-with-apis

sunbird_image_storage_url:          # Azure storage url ex: https://sunbirdtest.blob.core.windows.net/dial/
sunbird_azure_storage_key:          # Azure account storage key
sunbird_azure_storage_account:      # Azure account storage name

sunbird_environment:                # Sunbird environment eg: dev 
sunbird_instance:                   # Sunbird Implimentation name eg: test-implimentation 

#----------------------------------------------------------------------#
#----------------------------------------------------------------------#


## Advanced config

# DB IPs, Default will be database_host
elasticsearch_host: 
cassandra_host: 
postgres_master_host: 
postgres_slave_host: 
swarm_manager_host: 
swarm_node_host: 
keycloak_host: 
log_es_host: 

# Variables for monitoring
prometheus_host:
grafana_host:
alertmanager_host:

# Unique DB passwords, Default will be database_password
# If you have dbs pre installed, you have to fill the passwords, it's mandatory.
postgres_keycloak_password:
postgres_app_password:
postgres_kong_password:
postgres_badger_password:
cassandra_password:


sunbird_telemetry_pdata_id:           #some telemetry id which should available in ekstep 
sunbird_installation_email:           #  

#Logging   (mandatory fields if logging is required)
vault_google_client_id:         # Google oauth client id 
vault_google_client_secret:     # Google oauth client secret
vault_cookie_secret:            # Google oauth cookie secret
kibana_access_domain_list:      # Kibana access for all the users with this domain
kibana_access_mail_list:        # Kibana access for the mentioned users



#Monitoring (mandatory fields if monitoring is required) 
mail_server_host: #mail server host ex: smtp.sendgrid.net
mail_server_port: #mail server host ex: 587
mail_server_username: #username
mail_server_password: #password
vault_postgres_exporter_password: #password for the postgres exporter password
grafana_admin_password:  #grafana admin password
monitor_alerts_slack_url: #slack webhook url 
monitor_alerts_slack_channel: #slack channel for alerts
alerts_mailing_list:  #list of user mail id's who need alerts.
kong__test_jwt:  #kong test jwt token 
vault_proxy_prometheus_admin_creds: 



#es config
es_etc_node_datagroups['es']:
es_api_host: "{{ groups['es'][0] }}"
es_heap_size: 1500m
es_etc_discovery_zen_minimum_master_nodes: 1
es_snapshot_host: "{{ groups['es'][0] }}"
es_restore_host: "{{ groups['es'][0] }}"
snapshot_base_path: application
