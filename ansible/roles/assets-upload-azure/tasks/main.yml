- name: Ensure azure blob storage container exists
  command: az storage container create  --name {{player_cdn_container}}
  ignore_errors: true
  environment:
    AZURE_STORAGE_ACCOUNT: "{{cassandra_backup_azure_storage_account_name}}"
    AZURE_STORAGE_KEY: "{{cassandra_backup_azure_storage_access_key}}"
 
# Upload the assets created by the job to azure
- name: Upload to azure blob storage
  command: az storage blob upload-batch -d {{player_cdn_container}} -s {{assets}}
  environment:
    AZURE_STORAGE_ACCOUNT: "{{cassandra_backup_azure_storage_account_name}}"
    AZURE_STORAGE_KEY: "{{cassandra_backup_azure_storage_access_key}}"
  async: 60
  poll: 10
 
