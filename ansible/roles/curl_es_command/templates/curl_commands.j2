#!/bin/sh



curl -XPUT '{{sunbird_es_host}}:9200/searchindex?pretty' -H 'Content-Type: application/json' -d'
{
    "settings" : {"analysis": {"analyzer": {"cs_index_analyzer": {"type": "custom","tokenizer": "standard","filter": ["lowercase","mynGram"]},"cs_search_analyzer": {"type": "custom","tokenizer": "standard","filter": ["lowercase","standard"]},"keylower": {"type": "custom","tokenizer": "keyword","filter": "lowercase"}},"filter": {"mynGram": {"type": "ngram","min_gram": 1,"max_gram": 20,"token_chars": ["letter", "digit","whitespace","punctuation","symbol"]} }}}
}'

curl -XPUT '{{sunbird_es_host}}:9200/searchindex/user/_mapping?pretty' -H 'Content-Type: application/json' -d'
{
    "user" : {  "dynamic_templates": [ {"longs": {"match_mapping_type": "long", "mapping": {"type": "long", "fields": { "raw": {"type": "long"  } }}}},{"booleans": {"match_mapping_type": "boolean", "mapping": {"type": "boolean", "fields": { "raw": { "type": "boolean" }} }}},{"doubles": {"match_mapping_type": "double","mapping": {"type": "double","fields":{"raw": { "type": "double" } }}}},{ "dates": {"match_mapping_type": "date", "mapping": { "type": "date","fields": {"raw": { "type": "date" } } }}},{"strings": {"match_mapping_type": "string","mapping": {"type": "text","fielddata": true,"copy_to": "all_fields","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": {"raw": {"type": "text","fielddata": true,"analyzer": "keylower"}}}}}],"properties": {"all_fields": {"type": "text","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": { "raw": { "type": "text","analyzer": "keylower" } }} }}
}'

curl -XPUT '{{sunbird_es_host}}:9200/searchindex/org/_mapping?pretty' -H 'Content-Type: application/json' -d'
{
    "org" : {  "dynamic_templates": [ {"longs": {"match_mapping_type": "long", "mapping": {"type": "long", "fields": { "raw": {"type": "long"  } }}}},{"booleans": {"match_mapping_type": "boolean", "mapping": {"type": "boolean", "fields": { "raw": { "type": "boolean" }} }}},{"doubles": {"match_mapping_type": "double","mapping": {"type": "double","fields":{"raw": { "type": "double" } }}}},{ "dates": {"match_mapping_type": "date", "mapping": { "type": "date","fields": {"raw": { "type": "date" } } }}},{"strings": {"match_mapping_type": "string","mapping": {"type": "text","fielddata": true,"copy_to": "all_fields","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": {"raw": {"type": "text","fielddata": true,"analyzer": "keylower"}}}}}],"properties": {"all_fields": {"type": "text","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": { "raw": { "type": "text","analyzer": "keylower" } }} }}
}'

curl -XPUT '{{sunbird_es_host}}:9200/searchindex/course/_mapping?pretty' -H 'Content-Type: application/json' -d'
{
    "course" : {  "dynamic_templates": [ {"longs": {"match_mapping_type": "long", "mapping": {"type": "long", "fields": { "raw": {"type": "long"  } }}}},{"booleans": {"match_mapping_type": "boolean", "mapping": {"type": "boolean", "fields": { "raw": { "type": "boolean" }} }}},{"doubles": {"match_mapping_type": "double","mapping": {"type": "double","fields":{"raw": { "type": "double" } }}}},{ "dates": {"match_mapping_type": "date", "mapping": { "type": "date","fields": {"raw": { "type": "date" } } }}},{"strings": {"match_mapping_type": "string","mapping": {"type": "text","fielddata": true,"copy_to": "all_fields","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": {"raw": {"type": "text","fielddata": true,"analyzer": "keylower"}}}}}],"properties": {"all_fields": {"type": "text","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": { "raw": { "type": "text","analyzer": "keylower" } }} }}
}'

curl -XPUT '{{sunbird_es_host}}:9200/searchindex/usercourses/_mapping?pretty' -H 'Content-Type: application/json' -d'
{
    "usercourses" : {  "dynamic_templates": [ {"longs": {"match_mapping_type": "long", "mapping": {"type": "long", "fields": { "raw": {"type": "long"  } }}}},{"booleans": {"match_mapping_type": "boolean", "mapping": {"type": "boolean", "fields": { "raw": { "type": "boolean" }} }}},{"doubles": {"match_mapping_type": "double","mapping": {"type": "double","fields":{"raw": { "type": "double" } }}}},{ "dates": {"match_mapping_type": "date", "mapping": { "type": "date","fields": {"raw": { "type": "date" } } }}},{"strings": {"match_mapping_type": "string","mapping": {"type": "text","fielddata": true,"copy_to": "all_fields","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": {"raw": {"type": "text","fielddata": true,"analyzer": "keylower"}}}}}],"properties": {"all_fields": {"type": "text","analyzer": "cs_index_analyzer","search_analyzer": "cs_search_analyzer","fields": { "raw": { "type": "text","analyzer": "keylower" } }} }}
}'    

curl -XPUT '{{sunbird_es_host}}:9200/searchindex/cbatch/_mapping?pretty' \
  -H 'content-type: application/json' \
  -d '{"dynamic":false,"properties":{"all_fields":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower"}},"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer"},"countDecrementDate":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"countDecrementStatus":{"type":"boolean","fields":{"raw":{"type":"boolean"}}},"countIncrementDate":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"countIncrementStatus":{"type":"boolean","fields":{"raw":{"type":"boolean"}}},"courseCreator":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"courseId":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"batchId":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"createdBy":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"createdDate":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"createdFor":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"description":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"endDate":{"type":"date","fields":{"raw":{"type":"date"}}},"enrollmentType":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"hashTagId":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"id":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"identifier":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"mentors":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"name":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true},"startDate":{"type":"date","fields":{"raw":{"type":"date"}}},"status":{"type":"long","fields":{"raw":{"type":"long"}}},"updatedDate":{"type":"text","fields":{"raw":{"type":"text","analyzer":"keylower","fielddata":true}},"copy_to":["all_fields"],"analyzer":"cs_index_analyzer","search_analyzer":"cs_search_analyzer","fielddata":true}}}'

