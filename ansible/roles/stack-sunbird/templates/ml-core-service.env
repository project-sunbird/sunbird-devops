# ML core Service Config

# Port on which the service will listen to
APPLICATION_PORT={{ml_core_port|default("3000")}}

#Application ENV example local/dev/production
APPLICATION_ENV={{ env }}

# Setting to turn on/off console logs
ENABLE_CONSOLE_LOGGING={{ml_core_enable_debug_logging | default("OFF")}}

# Mongo DB Configuration
MONGODB_URL=mongodb://{{ml_mongodb_host | default(groups['mongo_master'][0]+':27017')}}/{{ ml_mongodb | default("ml-survey") }}

# Secure token access Admin related API's
# The value of internal access token can be generated by command - "openssl rand -hex 10
INTERNAL_ACCESS_TOKEN={{ml_core_internal_access_token}}

#Gotenberg configuration
GOTENBERG_SERVICE_URL={{ml_gotenberg_url | default("http://gotenberg-service:3000")}}


# CLOUD STORAGE 
CLOUD_STORAGE_PROVIDER={{cloud_service_provider}}
CLOUD_STORAGE_ACCOUNTNAME={{cloud_public_storage_accountname | default("")}}
CLOUD_STORAGE_SECRET={{cloud_public_storage_secret | default("")}}
CLOUD_STORAGE_BUCKETNAME={{ml_container | default("")}}
CLOUD_STORAGE_REGION={{cloud_public_storage_region | default("")}}
CLOUD_STORAGE_PROJECT={{cloud_public_storage_project | default("")}}
CLOUD_ENDPOINT={{cloud_public_storage_endpoint | default("")}}


# OFFLINE TOKEN VALIDATION
# Offline token validation public key paths
KEYCLOAK_PUBLIC_KEY_PATH={{ml_core_keycloak_public_key_path|default("keycloak-public-keys")}}

# ML Survey Service
ML_SURVEY_SERVICE_URL={{ml_survey_service_url | default("http://ml-survey-service:3000")}}

# ML Project Service Service
ML_PROJECT_SERVICE_URL={{ml_projects_service_url | default("http://ml-projects-service:3000")}}

# Elastic search configurations 
# Elastic search enable/disable flag E.g. ON/OFF
ELASTICSEARCH_COMMUNICATIONS_ON_OFF={{ml_core_elasticsearch_communications_on_off | default("OFF")}}

# Elastic search host url
ELASTICSEARCH_HOST_URL={{ml_core_elasticsearch_host_url | default("")}}

# Elastic search index name for entities
ELASTICSEARCH_ENTITIES_INDEX={{ml_core_elasticsearch_user_extension_index_type | default ("")}}

# Base url of the sunbird enviornment
USER_SERVICE_URL={{ml_core_user_service_URL | default("http://learner-service:9000")}}

## portal url of env
APP_PORTAL_BASE_URL={{ proto }}://{{ domain_name }}

# Kafka enable or disable communication flag
KAFKA_COMMUNICATIONS_ON_OFF={{ml_core_kafka_communications_on_off | default("ON")}}

# IP address of kafka server with port without HTTP
KAFKA_URL={{ml_core_kafka_url | default(groups['processing-cluster-kafka'][0]+':9092')}}

# Kafka consumer group for ML Core Service
KAFKA_GROUP_ID={{ml_core_kafka_group_id | default("ml-core-service")}}

#Kafka topic name for pushing programUsers
PROGRAM_USERS_JOINED_TOPIC={{ml_core_program_users_joined_topic | default (env_name+".programuser.info")}}

#TimeOffset with respect to UTC
TIMEZONE_DIFFRENECE_BETWEEN_LOCAL_TIME_AND_UTC={{ml_core_timezone_diffrenece_between_local_time_and_utc | default ("+05:30")}}


#Validate Entities enable/Disable
VALIDATE_ENTITIES={{ml_service_validate_entities | default ("ON")}}