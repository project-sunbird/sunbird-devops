# ML Survey Service Config
# Application host
HOST={{ml_survey_host | default("localhost")}}

# Application port number which the service will listen to
PORT={{ml_survey_port | default("3000")}} 

#Application ENV example local/dev/production
NODE_ENV={{ml_survey_node_env|default("development")}}

#Log configuration
#Enable console logging
ENABLE_DEBUG_LOGGING={{ml_survey_enable_debug_logging | default("ON")}}

# Allow report request to run for longer time
REQUEST_TIMEOUT_FOR_REPORTS={{ml_survey_request_timeout_for_reports | default("6000000")}}

# User read api end point
USER_PROFILE_FETCH_ENDPOINT={{ml_survey_user_profile_fetch_endpoint | default("/api/user/v1/read")}}

## Cloud Environment platform
# which will be templatized from the above variable (default)

# Cloud configuration for assesment service
# Options available
#
## Azure Cloud Configuration
#
#  CLOUD_STORAGE=AZURE
#  AZURE_ACCOUNT_NAME=
#  AZURE_ACCOUNT_KEY=
#  AZURE_STORAGE_CONTAINER=
#
## Google Cloud Configuration
#
#  CLOUD_STORAGE=GCP
#  GCP_PATH=
#  GCP_BUCKET_NAME=
#
## AWS Cloud Configuration
#
#  CLOUD_STORAGE=AWS
#  AWS_ACCESS_KEY_ID=
#  AWS_SECRET_ACCESS_KEY=
#  AWS_BUCKET_NAME=
#  AWS_BUCKET_ENDPOINT=
#  AWS_BUCKET_REGION=
# To change the cloud config for azure, override below variable in common.yaml
# For Example, 
# ml_survey_cloud_config: |
#   CLOUD_STORAGE=AZURE
#   AZURE_ACCOUNT_NAME=mystorageaccount
#   AZURE_ACCOUNT_KEY=xx123supersecretpassword
#   AZURE_STORAGE_CONTAINER=slassessmentscontainer

{{ml_survey_cloud_config}}

# Mongodb connection url
MONGODB_URL={{ml_survey_mongodb_url | default(groups['mongo_master'][0]+':27017')}}

# Base url of the sunbird enviornment
USER_SERVICE_URL={{ml_survey_user_service_URL | default("http://learner-service:9000")}

# Current name for mongodb database 
DB={{ml_survey_db_name|default("sl"+env)}}

# Secure token access Admin related API's
# The value of internal access token can be generated by command - "openssl rand -hex 10"
INTERNAL_ACCESS_TOKEN={{ml_survey_internal_access_token}}

# CSV Config
# Create the respective directory as provided in the path below (Path to folder where reports will be stored)
CSV_REPORTS_PATH={{ml_survey_csv_reports_path | default("reports")}}

# Kafka Configuration
# Flag which define where communication with kafka is on or off 
KAFKA_COMMUNICATIONS_ON_OFF={{ml_survey_kafka_communications_on_off | default("ON")}}

# IP address of kafka server with port without HTTP
KAFKA_URL={{ml_survey_kafka_url | default(groups['processing-cluster-kafka'][0]+':9092')}}

# Kafka topic name for pushing completed sumbmission
COMPLETED_SUBMISSION_TOPIC={{ml_survey_completed_submission_topic | default (env+".sl.submission.raw")}}

# Kafka topic name for pushing incompleted submission
INCOMPLETE_SUBMISSION_TOPIC={{ml_survey_incomplete_submission_topic | default (env+".sl.incomplete.submission.raw")}}

# Kafka topic name for pushing submissions for which rating has to be done
SUBMISSION_RATING_QUEUE_TOPIC={{ml_survey_submission_rating_queue_topic | default (env+".sl.submission.rating.raw")}}

# Kafka topic name for pushing completed observation submission
COMPLETED_OBSERVATION_SUBMISSION_TOPIC={{ml_survey_completed_observation_submission_topic | default (env+".sl.observation.raw")}}

# Kafka topic name for pushing incomplete observation submission
INCOMPLETE_OBSERVATION_SUBMISSION_TOPIC={{ml_survey_incomplete_observation_submission_topic | default (env+".sl.incomplete.observation.raw")}}

# Kafka topic name for pushing notification messages
NOTIFICATIONS_TOPIC={{ml_survey_notifications_topic | default (env+".sl.notification.raw")}})

# Kafka topic name for completed survey submission
COMPLETED_SURVEY_SUBMISSION_TOPIC={{ml_survey_completed_survey_submission_topic | default (env+".sl.survey.raw")}}

# Kafka topic name for incomplete survey submission
INCOMPLETE_SURVEY_SUBMISSION_TOPIC={{ml_survey_incomplete_survey_submission_topic | default (env+".sl.incomplete.observation.raw")}}

# Kafka consumer group for ML Survey Service
KAFKA_GROUP_ID={{ml_survey_kafka_group_id | default (env+"samiksha")}}

#  Kafka topic name for pushing project submission related data
IMPROVEMENT_PROJECT_SUBMISSION_TOPIC={{ml_survey_improvement_project_submission_topic | default(env+".sl.improvement.project.submission")}}

# Elastic search configurations 
# Elastic search enable/disable flag E.g. ON/OFF
ELASTICSEARCH_COMMUNICATIONS_ON_OFF={{ml_survey_elasticsearch_communications_on_off | default("ON")}}

# Elastic search host url
ELASTICSEARCH_HOST_URL={{ml_survey_elasticsearch_host_url | default(groups['es7'][0]+':9200')}

# Elastic search request timeout in miliseconds
ELASTIC_SEARCH_REQUEST_TIMEOUT={{ml_survey_elastic_search_request_timeout | default ("60000")}}

# Elastic search maximum number of retries before dropping connection
ELASTIC_SEARCH_MAX_RETRIES={{ml_survey_elastic_search_max_retries | default ("5")}}

# Flag to obtain ES Nodes list at the time of connection e.g. true/false
ELASTIC_SEARCH_SNIFF_ON_START={{ml_survey_elastic_search_sniff_on_start | default ("true")}} 

# Elastic search index name for storing user data
ELASTICSEARCH_USER_EXTENSION_INDEX={{ml_survey_elasticsearch_user_extension_index | default ("entities")}}

# Elastic search index name for storing entity data
ELASTICSEARCH_ENTITIES_INDEX={{ml_survey_elasticsearch_user_extension_index_type | default ("common")}}

# ML Core Service URL
ML_CORE_SERVICE_URL={{ml_core_service_url | default("http://ml-core-service:3000")}}

# Folder name in the project root directory where all the file to be imported will be stored
PUBLIC_FOLDER_PATH={{ml_survey_public_folder_path | default("public")}}

# OFFLINE TOKEN VALIDATION
#Enable offline validation of user token example ON/OFF
VALIDATE_ACCESS_TOKEN_OFFLINE={{ml_survey_validate_access_token_offline | default("ON")}}

#Path to folder inside project root which has keycloack access key
KEYCLOAK_PUBLIC_KEY_PATH={{ml_survey_keycloak_public_key_path|default("keycloak-public-keys")}}

## IMPROVEMENT PROJECT SERVICE
# Project Service URL
ML_PROJECT_SERVICE_URL={{ml_project_service_url | default("http://ml-project-service:3000")}}


