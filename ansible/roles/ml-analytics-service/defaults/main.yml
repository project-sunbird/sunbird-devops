---
# defaults file for data-pipeline
BASEPATH: "/opt/sparkjobs" # Git Clone Path **Mandatory
USER: "data-pipeline"
WORKDIR: "/opt/sparkjobs"
config_path: "/opt/sparkjobs/ml-analytics-service"
SYSTEMDDIR: "/lib/systemd/system"
ml_analytics_version: "release-4.1.0"
ml_survey_cloud_storage: "{{ ml_cloud_config.CLOUD_STORAGE }}"
ml_analytics_survey_app_name: "{{ ml_survey_app_name | default('sunbirdsurvey') }}"
ml_analytics_integrated_app_name: "{{ ml_integrated_app_name | default('sunbird') }}"
ml_analytics_survey_service: "http://{{private_ingressgateway_ip}}/ml-survey-service"
ml_analytics_evidence_base_url: "https://{{ ml_cloud_config.AZURE_ACCOUNT_NAME }}.blob.core.windows.net/{{ ml_cloud_config.AZURE_STORAGE_CONTAINER }}/"
ml_analytics_mongodb_url: "{{ml_mongodb_host | default(groups['mongo_master'][0]+':27017')}}"
ml_analytics_mongo_db_name: "ml-survey"
ml_analytics_mongo_observation_submission_collection: "observationSubmissions"
ml_analytics_mongo_solution_collection: "solutions"
ml_analytics_mongo_observation_collection: "observations"
ml_analytics_mongo_entity_type_collection: "entityTypes"
ml_analytics_mongo_question_collection: "questions"
ml_analytics_mongo_criteria_collection: "criteria"
ml_analytics_mongo_entities_collection: "entities"
ml_analytics_mongo_program_collection: "programs"
ml_analytics_mongo_userroles_collection: "userRoles"
ml_analytics_mongo_criteria_questions_collection: "criteriaQuestions"
ml_analytics_mongo_projects_collection: "projects"
ml_analytics_mongo_survey_submissions_collection: "surveySubmissions"
ml_analytics_mongo_survey_collection: "survey"
ml_analytics_druid_url:  "{{groups['druid'][0]}}:8081"
ml_analytics_kafka_url: "{{ml_kafka_host | default(groups['processing-cluster-kafka'][0]+':9092')}}"
ml_analytics_kafka_observation_topic_name: "{{ env_name }}.ml.observation.raw"
ml_analytics_kafka_observation_druid_topic_name: "{{ env_name }}.ml.observation.druid"
ml_analytics_kafka_observation_evidence_topic_name: "{{ env_name }}.ml.observation.evidence.druid"
ml_analytics_kafka_survey_evidence_topic_name: "{{ env_name }}.ml.survey.evidence.druid"
ml_analytics_kafka_survey_topic_name: "{{ env_name }}.ml.survey.raw"
ml_analytics_kafka_survey_druid_topic_name: "{{ env_name }}.ml.survey.druid"
ml_analytics_observation_log_folder_path: "{{ WORKDIR }}/logs/observation"
ml_analytics_project_log_folder_path: "{{ WORKDIR }}/logs/project"
ml_analytics_survey_log_folder_path: "{{ WORKDIR }}/logs/survey"
ml_analytics_azure_account_name: "{{ ml_cloud_config.AZURE_ACCOUNT_NAME | default('sunbird_public_storage_account_name') }}"
ml_analytics_azure_container_name: "{{ ml_cloud_config.AZURE_ACCOUNT_KEY | default('samiksha')}}"
ml_analytics_observation_azure_blob_path: "observation/status/"
ml_analytics_project_azure_blob_path: "reports/"
ml_analytics_redis_host: "{{ml_redis_host | default(groups['dp-redis'][0])}}"
ml_analytics_redis_port: 6381
ml_analytics_redis_db_name: "12"
ml_analytics_project_output_dir: "{{ WORKDIR }}/source/projects/output"
ml_analytics_observation_status_output_dir: "{{ WORKDIR }}/source/observations/status/output"
ml_analytics_api_authorization_key: "{{ml_api_auth_token | default('sunbird_api_auth_token')}}"
ml_analytics_api_access_token: "{{ml_api_access_token | default('ml_core_internal_access_token')}}"
ml_analytics_druid_observation_status_injestion_spec : '{"type":"index","spec":{"ioConfig":{"type":"index","inputSource":{"type": "azure","uris": ["azure://ml/observation/status/sl_observation_status.json"]},"inputFormat":{"type":"json":,"tuningConfig":{"type":"index","partitionsSpec":{"type":"dynamic":,"dataSchema":{"dataSource":"sl_observation_status","granularitySpec":{"type":"uniform","queryGranularity":"DAY","rollup":false,"segmentGranularity":"DAY"},"timestampSpec":{"column":"completedDate","format":"auto"},"dimensionsSpec":{"dimensions":["status","entity_externalId","entity_id","entity_type","solution_id","solution_externalId","submission_id","entity_name","solution_name","role_title","school_name","school_id","school_externalId","state_name","state_id","state_externalId","district_name","district_id","district_externalId","zone_name","zone_id","zone_externalId","parent_name","parent_id","block_name","block_id","block_externalId","cluster_name","cluster_id","cluster_externalId","teacher_name","teacher_id","teacher_externalId","schoolLeader_name","schoolLeader_id","schoolLeader_externalId","taluk_id","taluk_externalId","taluk_name","hub_name","hub_id","hub_externalId","mandal_name","mandal_id","mandal_externalId","region_name","region_id","region_externalId","complex_name","complex_id","complex_externalId","completedDate","beat_name","beat_id","beat_externalId","division_name","division_id","division_externalId","Village/Ward_name","Village/Ward_id","Village/Ward_externalId","channel","parent_channel","program_id","program_externalId","program_name","app_name","user_id","private_program","solution_type","organisation_name", "ecm_marked_na"]},"metricsSpec":[]:}'
ml_analytics_druid_project_injestion_spec : '{"type":"index","spec":{"ioConfig":{"type":"index","inputSource":{"type": "azure","uris": ["azure://ml/projects/sl_projects.json"]},"inputFormat":{"type":"json":,"tuningConfig":{"type":"index","partitionsSpec":{"type":"dynamic":,"dataSchema":{"dataSource":"sl_projects","granularitySpec":{"type":"uniform","queryGranularity":"DAY","rollup":false,"segmentGranularity":"DAY"},"timestampSpec":{"column":"project_updated_date","format":"auto"},"dimensionsSpec":{"dimensions":[]},"metricsSpec":[]:}' 
ml_analytics_azure_sas_token: "{{ ml_cloud_config.AZURE_ACCOUNT_KEY | default('sunbird_public_storage_account_key')}}"
