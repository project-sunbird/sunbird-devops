- hosts: swarm-agent-for-prometheus
  become: yes
  vars_files:
    - ['{{inventory_dir}}/secrets.yml']
  roles:
    - prometheus-backup
  tags:
    - prometheus-backup


- hosts: swarm-agent-for-prometheus-stateful
  become: yes
  vars_files:
    - ['{{inventory_dir}}/secrets.yml']
  roles:
    - { role: prometheus-fed-stateful-backup, prometheus_service_name: 'monitor_stateful_prometheus', federation_prometheus_data_dir: "{{prometheus_fed_mount_point}}", prometheus_backup_azure_container_name: 'federation-prometheus-backup' }
  tags:
    - federation-prometheus-backup
    

- hosts: swarm-agent-for-prometheus-stateful
  become: yes
  vars_files:
    - ['{{inventory_dir}}/secrets.yml']
  roles:
    - { role: prometheus-fed-stateful-backup, prometheus_service_name: 'prometheus_fed_prometheus', federation_prometheus_data_dir: '{{prometheus_stateful_mount_point}}', prometheus_backup_azure_container_name: 'statefull-prometheus-backup' }
  tags:
    - stateful-prometheus-backup