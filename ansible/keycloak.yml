---
- hosts: keycloak
  become: true
  vars_files:
    - ['{{ inventory_dir }}/secrets.yml', 'secrets/{{ env }}.yml']
  # --tags provision/deployment will trigger respective roles
  roles:
    - {role: openjdk, tags: provision }
    - {role: keycloak-provision, tags: provision }
    - {role: keycloak-deploy, tags: deploy }
    - {role: keycloak-deploy, tags: bootstrap }
    - {role: keycloak-deploy, tags: custom }
    - {role: monit, monit_checks: ['keycloak'], tags: deploy }